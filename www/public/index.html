 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Blueberry</title>
    <link rel="stylesheet" type="text/css" href="lib/components/skeleton/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="lib/components/skeleton/css/skeleton.css">
    <script src="lib/components/lodash/dist/lodash.js"></script>
    <script src="lib/components/vue/dist/vue.js"></script>
    <script src="lib/rpc.js"></script>
    <script src="lib/blueberry.js"></script>
  </head>

  <body>
    <div id="main" class="container">
      <h1>Blueberry</h1>

      <table class="u-full-width">
        <thead>
          <tr>
            <th>Hash</th>
            <th>Name</th>
            <th>Status</th>
            <th>Progress</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="item in torrents">
            <td>{{ item.hash }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.status }}</td>
            <td>{{ item.percent }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      (function() {
        var bb = new Blueberry();

        new Vue({
          el: '#main',
          data: {
            torrents: []
          },
          methods: {
          },
          ready: function() {
            bb.jxhr('/rtorrent/request', Blueberry.rpc.list.getRequest())
              .then(function(data) {
                this.torrents = Blueberry.rpc.list.getResponse(data);
              }.bind(this), function(err) {
                console.log(err);
              });
          }
        });
      })();
    </script>
  </body>
</html>
